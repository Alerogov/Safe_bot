from telegram import Update, InlineKeyboardMarkup, InlineKeyboardButton
from telegram.ext import ApplicationBuilder, CommandHandler, CallbackQueryHandler, MessageHandler, filters, ContextTypes
import random

TOKEN = '7818144959:AAESBS3xLu4935xPt5Z3GZIKBiUnwO9AbJc'

# –°–ø–∏—Å–æ–∫ –∑ 40 –ø–∏—Ç–∞–Ω—å
QUESTIONS = [
  {"question": "–£ –ª—ñ—Å—ñ –ª–µ–∂–∏—Ç—å –¥–∏–≤–Ω–∏–π –ø—Ä–µ–¥–º–µ—Ç —ñ–∑ –¥—Ä–æ—Ç–∞–º–∏. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ —á—ñ–ø–∞–π, –ø–æ–≤—ñ–¥–æ–º –¥–æ—Ä–æ—Å–ª–∏—Ö –∞–±–æ 101", "wrong": "–†–æ–∑–≥–ª—è–Ω—å –±–ª–∏–∂—á–µ, –º–æ–∂–ª–∏–≤–æ, —Ü–µ —â–æ—Å—å –∫–æ—Ä–∏—Å–Ω–µ"},
  {"question": "–î—Ä—É–≥ –∑–Ω–∞–π—à–æ–≤ —Å—Ç–∞—Ä—É –≥—Ä–∞–Ω–∞—Ç—É. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ó—É–ø–∏–Ω–∏ –¥—Ä—É–≥–∞, –≤—ñ–¥—ñ–π–¥—ñ—Ç—å —ñ –ø–æ–¥–∑–≤–æ–Ω—ñ—Ç—å 101", "wrong": "–°–ø—Ä–æ–±—É–π —Ä–æ–∑—ñ–±—Ä–∞—Ç–∏ —ó—ó"},
  {"question": "–¢–∏ –ø–æ—á—É–≤ –Ω–µ–∑—Ä–æ–∑—É–º—ñ–ª–∏–π –∑–≤—É–∫ —É –∑–µ–º–ª—ñ. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ó—É–ø–∏–Ω–∏—Å—å —ñ –ø–æ–∫–ª–∏—á –¥–æ—Ä–æ—Å–ª–æ–≥–æ", "wrong": "–°–ø—Ä–æ–±—É–π –∫–æ–ø–∞—Ç–∏"},
  {"question": "–ë–∞—á–∏—à —Ç–∞–±–ª–∏—á–∫—É –∑ —á–µ—Ä–µ–ø–æ–º —ñ –Ω–∞–ø–∏—Å–æ–º '–ú—ñ–Ω–∏'. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–û–±—ñ–π–¥–∏ —Ü—é –º—ñ—Å—Ü–µ–≤—ñ—Å—Ç—å —è–∫–æ–º–æ–≥–∞ –¥–∞–ª—ñ", "wrong": "–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—É–π —ó—ó –∑–±–ª–∏–∑—å–∫–∞"},
  {"question": "–ù–∞ –¥–æ—Ä–æ–∑—ñ –ª–µ–∂–∏—Ç—å –¥–∏–≤–Ω–∞ –∫–æ—Ä–æ–±–∫–∞. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ –ø—ñ–¥—Ö–æ–¥—å —ñ —Å–∫–∞–∂–∏ –¥–æ—Ä–æ—Å–ª–∏–º –∞–±–æ –∑–∞—Ç–µ–ª–µ—Ñ–æ–Ω—É–π 101", "wrong": "–í—ñ–¥–∫—Ä–∏–π —ñ –ø–æ–¥–∏–≤–∏—Å—å, —â–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ"},
  {"question": "–ü—ñ–¥ —á–∞—Å –ø—Ä–æ–≥—É–ª—è–Ω–∫–∏ –∑–Ω–∞–π—à–æ–≤ —Å–Ω–∞—Ä—è–¥. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ–≥–∞–π–Ω–æ –≤—ñ–¥—ñ–π—Ç–∏ —ñ –ø–æ–ø–µ—Ä–µ–¥–∏—Ç–∏ —ñ–Ω—à–∏—Ö", "wrong": "–ü–æ–∫—Ä—É—Ç–∏ –π–æ–≥–æ, —â–æ–± –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ —Ü–µ"},
  {"question": "–î—Ä—É–≥ –ø—Ä–∏–Ω—ñ—Å –ø—ñ–¥–æ–∑—Ä—ñ–ª–∏–π –ø—Ä–µ–¥–º–µ—Ç –¥–æ–¥–æ–º—É. –¢–≤–æ—ó –¥—ñ—ó?", "correct": "–°–∫–∞–∂–∏ –¥–æ—Ä–æ—Å–ª–∏–º —ñ —Ç—Ä–∏–º–∞–π—Å—è –ø–æ–¥–∞–ª—ñ", "wrong": "–ü–æ–≥—Ä–∞–π—Ç–µ—Å—å –Ω–∏–º, –ø–æ–∫–∏ –Ω—ñ—Ö—Ç–æ –Ω–µ –±–∞—á–∏—Ç—å"},
  {"question": "–ù–∞ –≤—É–ª–∏—Ü—ñ –≤–∏—è–≤–∏–ª–∏ –Ω–µ–≤—ñ–¥–æ–º–∏–π —Ä—é–∫–∑–∞–∫. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ü–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –¥–æ—Ä–æ—Å–ª–∏–º –∞–±–æ –ø–æ–ª—ñ—Ü—ñ—ó", "wrong": "–í—ñ–¥–∫—Ä–∏—Ç–∏ —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —î —â–æ—Å—å —Ü—ñ–∫–∞–≤–µ"},
  {"question": "–£ —à–∫–æ–ª—ñ –∑–Ω–∞–π—à–ª–∏ –Ω–µ–≤—ñ–¥–æ–º–∏–π –ø—Ä–µ–¥–º–µ—Ç. –¢–≤–æ—ó –¥—ñ—ó?", "correct": "–ü–æ–ø–µ—Ä–µ–¥–∏—Ç–∏ –≤—á–∏—Ç–µ–ª—è —ñ –Ω–µ —á—ñ–ø–∞—Ç–∏", "wrong": "–°—Ö–æ–≤–∞—Ç–∏ –π–æ–≥–æ, —â–æ–± –Ω—ñ—Ö—Ç–æ –Ω–µ –∑–Ω–∞–π—à–æ–≤"},
  {"question": "–£ —Ç–µ–±–µ –≤–¥–æ–º–∞ –∑–∞–ª–∏—à–∏–ª–∞—Å—å –Ω–µ–≤—ñ–¥–æ–º–∞ —Ä—ñ—á –ø—ñ—Å–ª—è –≥–æ—Å—Ç–µ–π. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–°–∫–∞–∂–∏ –±–∞—Ç—å–∫–∞–º —ñ –Ω–µ —Ç–æ—Ä–∫–∞–π—Å—è", "wrong": "–†–æ–∑–¥–∏–≤–∏—Å—è —Å–∞–º —ñ –≤–∫–ª—é—á–∏, —è–∫—â–æ —î –∫–Ω–æ–ø–∫–∏"},
  {"question": "–ü—ñ–¥ —á–∞—Å –ø—ñ–∫–Ω—ñ–∫–∞ —Ö—Ç–æ—Å—å –≤–∏–∫–æ–ø–∞–≤ –¥–∏–≤–Ω—É –∑–∞–ª—ñ–∑–Ω—É —Ä—ñ—á. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ–≥–∞–π–Ω–æ –∑—É–ø–∏–Ω–∏—Ç–∏ —ñ –≤—ñ–¥—ñ–π—Ç–∏", "wrong": "–î—ñ—Å—Ç–∞—Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é, —Ä–∞–ø—Ç–æ–º —Ü–µ —Å–∫–∞—Ä–±"},
  {"question": "–ó–Ω–∞–π—à–æ–≤ —É –∑–µ–º–ª—ñ –º–µ—Ç–∞–ª–µ–≤–∏–π –ø—Ä–µ–¥–º–µ—Ç. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–í—ñ–¥—ñ–π–¥–∏ —Ç–∞ –ø–æ–ø–µ—Ä–µ–¥—å —ñ–Ω—à–∏—Ö", "wrong": "–í–∏—Ç—è–≥–Ω–∏ —ñ –ø–æ–¥–∏–≤–∏—Å—å"},
  {"question": "–¢–æ–±—ñ –ø–æ–∫–∞–∑–∞–ª–∏ –¥–∏–≤–Ω—É —à—Ç—É–∫—É, —Å—Ö–æ–∂—É –Ω–∞ –≤–∏–±—É—Ö—ñ–≤–∫—É. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–°–∫–∞–∂–∏ –¥–æ—Ä–æ—Å–ª–∏–º –∞–±–æ –ø–æ–¥–∑–≤–æ–Ω–∏ 101", "wrong": "–ü–µ—Ä–µ–¥–∞–π —ñ–Ω—à–æ–º—É –¥—Ä—É–≥—É, —â–æ–± –ø–æ–¥–∏–≤–∏–≤—Å—è"},
  {"question": "–£ –ª—ñ—Å—ñ –Ω–∞ –≥—ñ–ª—Ü—ñ –≤–∏—Å–∏—Ç—å –¥—Ä—ñ—Ç. –¢–≤–æ—ó –¥—ñ—ó?", "correct": "–û–±—ñ–π–¥–∏ —ñ –ø–æ–≤—ñ–¥–æ–º –¥–æ—Ä–æ—Å–ª–∏—Ö", "wrong": "–î–æ—Ç–æ—Ä–∫–Ω–∏—Å—å, —Ä–∞–ø—Ç–æ–º —Ü–µ –ø–∞—Å—Ç–∫–∞ –¥–ª—è —Ç–≤–∞—Ä–∏–Ω"},
  {"question": "–ù–∞ –ø–æ–ª—ñ —Å—Ç–æ—ó—Ç—å —Ç–∞–±–ª–∏—á–∫–∞ '–ù–µ–±–µ–∑–ø–µ–∫–∞'. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–û–±—ñ–π–¥–∏ —ñ –Ω–µ –∑–∞—Ö–æ–¥—å –Ω–∞ –ø–æ–ª–µ", "wrong": "–ó–∞–π–¥–∏ —Ç—É–¥–∏, –±–æ —Ü—ñ–∫–∞–≤–æ"},
  {"question": "–ü–æ—á—É–≤ –≥—É—á–Ω–∏–π –≤–∏–±—É—Ö –Ω–µ–ø–æ–¥–∞–ª—ñ–∫. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–°—Ö–æ–≤–∞–π—Å—è –≤ –±–µ–∑–ø–µ—á–Ω–æ–º—É –º—ñ—Å—Ü—ñ —Ç–∞ –ø–æ–≤—ñ–¥–æ–º –¥–æ—Ä–æ—Å–ª–∏—Ö", "wrong": "–ë—ñ–∂–∏ –±–ª–∏–∂—á–µ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—å"},
  {"question": "–£ –∑–Ω–∞–π–æ–º–æ–≥–æ —î —Å–Ω–∞—Ä—è–¥ —è–∫ '—Å—É–≤–µ–Ω—ñ—Ä'. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–°–∫–∞–∂–∏ –¥–æ—Ä–æ—Å–ª–∏–º, —Ü–µ –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ", "wrong": "–î–æ—Ç–æ—Ä–∫–Ω–∏—Å—å —ñ —Å—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—É–π"},
  {"question": "–ë–∞—á–∏—à, —è–∫ –Ω–µ–∑–Ω–∞–π–æ–º–∏–π –¥–æ—Ä–æ—Å–ª–∏–π –∫–æ–ø–∞—î –≤ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ–π –∑–æ–Ω—ñ. –¢–≤–æ—ó –¥—ñ—ó?", "correct": "–ù–µ –ø—ñ–¥—Ö–æ–¥—å —ñ –ø–æ–≤—ñ–¥–æ–º –ø–æ–ª—ñ—Ü—ñ—é", "wrong": "–ü—ñ–¥—ñ–π–¥–∏ —ñ –∑–∞–ø–∏—Ç–∞–π, —â–æ –≤—ñ–Ω —à—É–∫–∞—î"},
  {"question": "–ü–æ—á—É–≤ –∫–ª–∞—Ü–∞–Ω–Ω—è –ø—ñ–¥ –Ω–æ–≥–æ—é –≤ –ø–æ–ª—ñ. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ó–∞–≤–º–µ—Ä—Ç–∏ —ñ –∫–ª–∏–∫–∞—Ç–∏ –Ω–∞ –¥–æ–ø–æ–º–æ–≥—É", "wrong": "–ü—ñ–¥–Ω—ñ–º–∏ –Ω–æ–≥—É —ñ –±—ñ–∂–∏"},
  {"question": "–ü—ñ–¥ —á–∞—Å –≥—Ä–∏ –Ω–∞ –ø–æ–¥–≤—ñ—Ä‚Äô—ó –∑–Ω–∞–π—à–ª–∏ —à–º–∞—Ç–æ–∫ –º–µ—Ç–∞–ª—É. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ —á—ñ–ø–∞—Ç–∏ —ñ —Å–∫–∞–∑–∞—Ç–∏ –±–∞—Ç—å–∫–∞–º", "wrong": "–ö–∏–Ω—É—Ç–∏, —è–∫ –º‚Äô—è—á"},
  {"question": "–ü—ñ—Å–ª—è –¥–æ—â—É –∑-–ø—ñ–¥ –∑–µ–º–ª—ñ –≤–∏–≥–ª—è–¥–∞—î —â–æ—Å—å –¥–∏–≤–Ω–µ. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ —Ç–æ—Ä–∫–∞–π—Å—è —ñ –ø–æ–ø–µ—Ä–µ–¥—å –¥–æ—Ä–æ—Å–ª–∏—Ö", "wrong": "–í–∏—Ç—è–≥–Ω–∏ —ñ –ø–æ–¥–∏–≤–∏—Å—å"},
  {"question": "–£ –ø–∞—Ä–∫—É –±–∞—á–∏—à –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω—É –∫–æ—Ä–æ–±–∫—É –¥–æ –¥–µ—Ä–µ–≤–∞. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ü–æ–≤—ñ–¥–æ–º –æ—Ö–æ—Ä–æ–Ω—É –∞–±–æ –ø–æ–ª—ñ—Ü—ñ—é", "wrong": "–í—ñ–¥–≤‚Äô—è–∂–∏ —ñ –∑–∞–≥–ª—è–Ω—å"},
  {"question": "–ü–æ–±–∞—á–∏–≤, —è–∫ –¥—ñ—Ç–∏ –∫–∏–¥–∞—é—Ç—å —â–æ—Å—å —Å—Ö–æ–∂–µ –Ω–∞ –≤–∏–±—É—Ö—ñ–≤–∫—É. –¢–≤–æ—ó –¥—ñ—ó?", "correct": "–ó—É–ø–∏–Ω–∏ —ó—Ö —ñ –ø–æ–∫–ª–∏—á –¥–æ—Ä–æ—Å–ª–æ–≥–æ", "wrong": "–ü—Ä–∏—î–¥–Ω–∞–π—Å—è –¥–æ –≥—Ä–∏"},
  {"question": "–•—Ç–æ—Å—å –ø—Ä–æ–ø–æ–Ω—É—î –∫—É–ø–∏—Ç–∏ '—Å—Ç–∞—Ä—É –≥—Ä–∞–Ω–∞—Ç—É'. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ–≥–∞–π–Ω–æ —Å–∫–∞–∑–∞—Ç–∏ –ø–æ–ª—ñ—Ü—ñ—ó", "wrong": "–í—ñ–∑—å–º–∏, —è–∫—â–æ –¥–µ—à–µ–≤–æ"},
  {"question": "–£ —à–∫–æ–ª—ñ —Ö—Ç–æ—Å—å —Ö–≤–∞–ª–∏—Ç—å—Å—è –≤–∏–±—É—Ö–æ–Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–º –ø—Ä–µ–¥–º–µ—Ç–æ–º. –¢–≤–æ—ó –¥—ñ—ó?", "correct": "–ü–æ–≤—ñ–¥–æ–º —É—á–∏—Ç–µ–ª—è –∞–±–æ –ø–æ–ª—ñ—Ü—ñ—é", "wrong": "–†–æ–∑–ø–∏—Ç–∞–π, –¥–µ –≤–∑—è–≤"},
  {"question": "–ù–∞ –ø–ª—è–∂—ñ –∑–Ω–∞–π—à–æ–≤ –¥–∏–≤–Ω—É –±–ª—è—à–∞–Ω–∫—É –∑ –¥—Ä–æ—Ç–∞–º–∏. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ —á—ñ–ø–∞–π —ñ –ø–æ–≤—ñ–¥–æ–º 101", "wrong": "–í—ñ–∑—å–º–∏ –¥–æ–¥–æ–º—É"},
  {"question": "–ü—ñ–¥ –¥–µ—Ä–µ–≤–æ–º –±–∞—á–∏—à –ø—Ä–µ–¥–º–µ—Ç –∑ –∞–Ω—Ç–µ–Ω–∞–º–∏. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–£—Ç—Ä–∏–º–∞–π—Å—è –≤—ñ–¥ –¥—ñ–π —ñ –ø–æ–∫–ª–∏—á –¥–æ—Ä–æ—Å–ª–æ–≥–æ", "wrong": "–ü–æ–¥–∏–≤–∏—Å—å, —á–∏ –ø—Ä–∞—Ü—é—î"},
  {"question": "–ë–∞—á–∏—à, —è–∫ —Ö—Ç–æ—Å—å —Ä–æ–∑–∫–æ–ø—É—î —Å–Ω–∞—Ä—è–¥. –¢–≤–æ—ó –¥—ñ—ó?", "correct": "–ù–µ –ø—ñ–¥—Ö–æ–¥—å —ñ –≤–∏–∫–ª–∏—á –ø–æ–ª—ñ—Ü—ñ—é", "wrong": "–ü—ñ–¥—ñ–π–¥–∏ —ñ –¥–æ–ø–æ–º–æ–∂–∏"},
  {"question": "–î—Ä—É–≥ –ø—Ä–æ–ø–æ–Ω—É—î —Å—Ö–æ–≤–∞—Ç–∏ –∑–Ω–∞–π–¥–µ–Ω–∏–π —Å–Ω–∞—Ä—è–¥. –¢–≤–æ—ó –¥—ñ—ó?", "correct": "–í—ñ–¥–º–æ–≤ —ñ –ø–æ–≤—ñ–¥–æ–º –¥–æ—Ä–æ—Å–ª–∏—Ö", "wrong": "–î–æ–ø–æ–º–æ–∂–∏ —Å—Ö–æ–≤–∞—Ç–∏"},
  {"question": "–ù–∞ —Å—Ç–µ–∂—Ü—ñ ‚Äî —Ç—Ä—ñ—Å–Ω—É—Ç–∞ –º–µ—Ç–∞–ª–µ–≤–∞ –±–∞–Ω–∫–∞. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ —á—ñ–ø–∞–π ‚Äî —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–±—É—Ö—ñ–≤–∫–∞", "wrong": "–†–æ–∑—á–∞–≤–∏ –Ω–æ–≥–æ—é"},
  {"question": "–£ –∑–Ω–∞–π–æ–º–∏—Ö –≤–¥–æ–º–∞ –ø–æ–±–∞—á–∏–≤ –º—ñ–Ω—É. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–°–∫–∞–∂–∏ –¥–æ—Ä–æ—Å–ª–∏–º –∞–±–æ –∑–∞—Ç–µ–ª–µ—Ñ–æ–Ω—É–π 101", "wrong": "–î–æ—Ç–æ—Ä–∫–Ω–∏—Å—å —ñ —Å—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—É–π"},
  {"question": "–ù–∞ –ø–ª—è–∂—ñ –Ω–∞—Ç—Ä–∞–ø–∏–≤ –Ω–∞ —â–æ—Å—å, —Å—Ö–æ–∂–µ –Ω–∞ –º—ñ–Ω—É. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ–≥–∞–π–Ω–æ –≤—ñ–¥—ñ–π—Ç–∏ —Ç–∞ –ø–æ–ø–µ—Ä–µ–¥–∏—Ç–∏ —ñ–Ω—à–∏—Ö", "wrong": "–ö–æ–ø–Ω–∏ –Ω–æ–≥–æ—é"},
  {"question": "–£ –ø–æ–ª—ñ –∑–Ω–∞–π—à–ª–∏ –∫—Ä—É–≥–ª–∏–π –ø—Ä–µ–¥–º–µ—Ç –∑ –æ—Ç–≤–æ—Ä–æ–º. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ —Ç–æ—Ä–∫–∞—Ç–∏—Å—è –π —Å–∫–∞–∑–∞—Ç–∏ –¥–æ—Ä–æ—Å–ª–∏–º", "wrong": "–ö–∏–Ω—å —É –Ω—å–æ–≥–æ –∫–∞–º—ñ–Ω—å"},
  {"question": "–•—Ç–æ—Å—å —Ä–æ–∑–ø–æ–≤—ñ–¥–∞—î, —â–æ —Ç—Ä–∏–º–∞—î –º—ñ–Ω–∏ –≤ —Å–∞—Ä–∞—ó. –¢–≤–æ—ó –¥—ñ—ó?", "correct": "–°–∫–∞–∂–∏ –¥–æ—Ä–æ—Å–ª–∏–º –∞–±–æ –ø–æ–ª—ñ—Ü—ñ—ó", "wrong": "–ó–∞–ø–∏—Ç–∞–π, —á–∏ –º–æ–∂–Ω–∞ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è"},
  {"question": "–ù–∞ –ø—Ä–æ–≥—É–ª—è–Ω—Ü—ñ –∑–Ω–∞–π—à–æ–≤ —Å—Ç–∞—Ä–∏–π –ø–∞—Ç—Ä–æ–Ω. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ —á—ñ–ø–∞–π —ñ —Å–∫–∞–∂–∏ –¥–æ—Ä–æ—Å–ª–∏–º", "wrong": "–ü–æ–≥—Ä–∞–π—Å—è –Ω–∏–º"},
  {"question": "–î—Ä—É–≥ –≥—Ä–∞—î –∑ –ø—ñ–¥–æ–∑—Ä—ñ–ª–∏–º –ø—Ä–µ–¥–º–µ—Ç–æ–º. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ó—É–ø–∏–Ω–∏ —ñ –ø–æ–≤—ñ–¥–æ–º –¥–æ—Ä–æ—Å–ª–∏—Ö", "wrong": "–ü–æ–≥—Ä–∞–π—Å—è —Ä–∞–∑–æ–º"},
  {"question": "–ü–æ–±–∞—á–∏–≤, —è–∫ —Ö—Ç–æ—Å—å –∫–∏–¥–∞—î —â–æ—Å—å —É –≤–æ–≥–æ–Ω—å. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ–≥–∞–π–Ω–æ –≤—ñ–¥—ñ–π—Ç–∏ —ñ –ø–æ–ø–µ—Ä–µ–¥–∏—Ç–∏ –¥–æ—Ä–æ—Å–ª–∏—Ö", "wrong": "–ü–æ—á–µ–∫–∞–π, —â–æ –±—É–¥–µ"},
  {"question": "–£ –ª—ñ—Å—ñ –Ω–∞—Ç—Ä–∞–ø–∏–≤ –Ω–∞ –º–µ—Ç–∞–ª–µ–≤–∏–π –∫—Ä—É–≥. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ —á—ñ–ø–∞–π —ñ –ø–æ–≤—ñ–¥–æ–º 101", "wrong": "–ù–∞—Å—Ç—É–ø–∏, —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏"},
  {"question": "–ë—ñ–ª—è —à–∫–æ–ª–∏ —Ö—Ç–æ—Å—å –∑–∞–ª–∏—à–∏–≤ –∫–æ—Ä–æ–±–∫—É. –¢–≤–æ—ó –¥—ñ—ó?", "correct": "–ü–æ–≤—ñ–¥–æ–º —É—á–∏—Ç–µ–ª—è –∞–±–æ –ø–æ–ª—ñ—Ü—ñ—é", "wrong": "–í—ñ–¥–∫—Ä–∏–π –ø–æ–¥–∏–≤–∏—Ç–∏—Å—å, —â–æ —Ç–∞–º"},
  {"question": "–£ –ª—ñ—Å—ñ –Ω–∞—Ç—Ä–∞–ø–∏–≤ –Ω–∞ –º–µ—Ç–∞–ª–µ–≤–∏–π –∫—Ä—É–≥. –©–æ —Ä–æ–±–∏—Ç–∏?", "correct": "–ù–µ —á—ñ–ø–∞–π —ñ –ø–æ–≤—ñ–¥–æ–º 101", "wrong": "–ù–∞—Å—Ç—É–ø–∏, —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏"},
  {"question": "–ë—ñ–ª—è —à–∫–æ–ª–∏ —Ö—Ç–æ—Å—å –∑–∞–ª–∏—à–∏–≤ –∫–æ—Ä–æ–±–∫—É. –¢–≤–æ—ó –¥—ñ—ó?", "correct": "–ü–æ–≤—ñ–¥–æ–º —É—á–∏—Ç–µ–ª—è –∞–±–æ –ø–æ–ª—ñ—Ü—ñ—é", "wrong": "–í—ñ–¥–∫—Ä–∏–π –ø–æ–¥–∏–≤–∏—Ç–∏—Å—å, —â–æ —Ç–∞–º"}
]

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
user_data = {}

# –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä—ñ–≤–Ω—ñ–≤ —ñ –ø–∏—Ç–∞–Ω—å –Ω–∞ —Ä—ñ–≤–µ–Ω—å
LEVELS = 5
QUESTIONS_PER_LEVEL = 8

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text("\U0001F44B –ü—Ä–∏–≤—ñ—Ç! –í–≤–µ–¥–∏ —Å–≤–æ—î —ñ–º‚Äô—è —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–µ:")
    user_data[update.message.from_user.id] = {"state": "waiting_name"}

async def handle_name(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if user_id not in user_data or user_data[user_id].get("state") != "waiting_name":
        return

    full_name = update.message.text.strip()
    user_data[user_id]["name"] = full_name
    user_data[user_id]["state"] = "ready"
    user_data[user_id]["level"] = 0
    user_data[user_id]["score"] = 0
    user_data[user_id]["question_index"] = 0
    user_data[user_id]["questions"] = random.sample(QUESTIONS, LEVELS * QUESTIONS_PER_LEVEL)
    await show_menu(update, context)

async def show_menu(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [
        [InlineKeyboardButton("‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –≥—Ä—É", callback_data="resume_game")] if user_data.get(update.message.from_user.id, {}).get("state") == "playing" else [InlineKeyboardButton("‚ñ∂Ô∏è –ü–æ—á–∞—Ç–∏ –≥—Ä—É", callback_data="start_game")],
        [InlineKeyboardButton("‚ÑπÔ∏è –ü—Ä–æ –≥—Ä—É", callback_data="about")],
        [InlineKeyboardButton("üìã –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–ø–µ–∫–∏", callback_data="rules")]
    ]
    await update.message.reply_text("\U0001F3C1 –û–±–µ—Ä–∏ –¥—ñ—é:", reply_markup=InlineKeyboardMarkup(keyboard))

async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    user_id = query.from_user.id
    data = user_data.get(user_id, {})

    if query.data == "about":
        keyboard = [[InlineKeyboardButton("üè† –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é", callback_data="menu")]]
        await query.edit_message_text("–¶–µ–π –±–æ—Ç –¥–æ–ø–æ–º–∞–≥–∞—î –¥—ñ—Ç—è–º –Ω–∞–≤—á–∏—Ç–∏—Å—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞—Ç–∏ –≤–∏–±—É—Ö–æ–Ω–µ–±–µ–∑–ø–µ—á–Ω—ñ –ø—Ä–µ–¥–º–µ—Ç–∏ —á–µ—Ä–µ–∑ –≥—Ä—É.", reply_markup=InlineKeyboardMarkup(keyboard))
    elif query.data == "rules":
        keyboard = [[InlineKeyboardButton("üè† –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é", callback_data="menu")]]
        await query.edit_message_text("üìå –ü—Ä–∞–≤–∏–ª–∞:\n1. –ù–µ —á—ñ–ø–∞–π –ø—ñ–¥–æ–∑—Ä—ñ–ª—ñ –ø—Ä–µ–¥–º–µ—Ç–∏.\n2. –ü–æ–≤—ñ–¥–æ–º –¥–æ—Ä–æ—Å–ª–∏—Ö –∞–±–æ –ø–æ–¥–∑–≤–æ–Ω–∏ 101.\n3. –ì—Ä–∞–π —É–≤–∞–∂–Ω–æ —Ç–∞ –±–µ–∑–ø–µ—á–Ω–æ!", reply_markup=InlineKeyboardMarkup(keyboard))
    elif query.data == "menu":
        await show_menu(query, context)
    elif query.data == "start_game":
        data.update({
            "level": 1,
            "score": 0,
            "question_index": 0,
            "state": "playing",
            "questions": random.sample(QUESTIONS, LEVELS * QUESTIONS_PER_LEVEL)
        })
        await send_question(query, user_id)
    elif query.data == "resume_game":
        await send_question(query, user_id)
    elif query.data.startswith("answer_"):
        selected = query.data.split("_")[1]
        index = data["question_index"]
        question = data["questions"][index]

        if selected == "correct":
            data["score"] += 1
            await query.edit_message_text("‚úÖ –í—ñ—Ä–Ω–æ! +1 –±–∞–ª!")
        else:
            await query.edit_message_text(f"‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!\n{question['question']}\n–ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å: {question['correct']}")

        data["question_index"] += 1
        if data["question_index"] % QUESTIONS_PER_LEVEL == 0:
            keyboard = [
                [InlineKeyboardButton("‚û°Ô∏è –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ —Ä—ñ–≤–µ–Ω—å", callback_data="next")],
                [InlineKeyboardButton("üè† –£ –≥–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é", callback_data="menu")]
            ]
            await query.message.reply_text(f"‚úÖ –†—ñ–≤–µ–Ω—å {data['level']} –∑–∞–≤–µ—Ä—à–µ–Ω–æ!", reply_markup=InlineKeyboardMarkup(keyboard))
        elif data["question_index"] < len(data["questions"]):
            await send_question(query, user_id)
        else:
            await show_result(query, user_id)
    elif query.data == "next":
        data["level"] += 1
        if data["question_index"] < len(data["questions"]):
            await send_question(query, user_id)
        else:
            await show_result(query, user_id)

async def send_question(query, user_id):
    data = user_data[user_id]
    index = data["question_index"]
    question = data["questions"][index]
    level = (index // QUESTIONS_PER_LEVEL) + 1
    keyboard = [
        [InlineKeyboardButton(question["correct"], callback_data="answer_correct")],
        [InlineKeyboardButton(question["wrong"], callback_data="answer_wrong")]
    ]
    await query.message.reply_text(f"\U0001F9E9 –†—ñ–≤–µ–Ω—å {level}, –ó–∞–≤–¥–∞–Ω–Ω—è {index + 1}:\n{question['question']}", reply_markup=InlineKeyboardMarkup(keyboard))

async def show_result(query, user_id):
    name = user_data[user_id]["name"]
    score = user_data[user_id]["score"]
    total = len(user_data[user_id]["questions"])
    user_data[user_id]["state"] = "completed"
    await query.edit_message_text(f"\U0001F3C1 –ì—Ä—É –∑–∞–≤–µ—Ä—à–µ–Ω–æ!\n\U0001F464 {name}\n‚úÖ –¢–≤—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {score} –∑ {total} –±–∞–ª—ñ–≤.")

if __name__ == '__main__':
    app = ApplicationBuilder().token(TOKEN).build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(CallbackQueryHandler(button_handler))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_name))
    print("–ë–æ—Ç –ø—Ä–∞—Ü—é—î...")
    app.run_polling()